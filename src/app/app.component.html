<clr-main-container>
  <clr-alerts>
    <clr-alert
      *ngFor="let alert of alertService.getAlerts()"
      [clrAlertType]="alert.type"
      [clrAlertAppLevel]="true"
      (clrAlertClosedChange)="onAlertClose(alert)"
    >
      <clr-alert-item>
        <span class="alert-text">{{ alert.text }}</span>
        <div *ngIf="alert.action !== undefined" class="alert-actions">
          <button
            class="btn alert-action"
            (click)="alert.action.click(alert.action.obj)"
          >
            {{ alert.action.text }}
          </button>
        </div>
      </clr-alert-item>
    </clr-alert>
  </clr-alerts>
  <clr-header class="header-6">
    <div class="branding">
      <a routerLink="/home" routerLinkActive="true" class="nav-link">
        <span class="sally-face-brush-sm"></span>
        <span class="line-word-logo"></span>
        <span class="title">{{ environment.appTitle }}</span>
      </a>
    </div>
    <div class="header-nav" [clr-nav-level]="1">
      <a
        [routerLink]="['/dashboard']"
        routerLinkActive="router-link-active"
        class="nav-link nav-text"
        >Dashboard</a
      >
    </div>

    <div class="header-actions">
      <ng-container
        *ngIf="
          authService.getOauth2User() !== null;
          then loggedIn;
          else loggedOut
        "
      >
      </ng-container>

      <ng-template #loggedIn>
        <clr-dropdown>
          <button
            class="nav-text"
            clrDropdownTrigger
            aria-label="open user profile"
          >
            {{ authService.getOauth2User().displayName }}
            <clr-icon shape="caret down"></clr-icon>
          </button>
          <clr-dropdown-menu *clrIfOpen clrPosition="bottom-right">
            <a routerLink="/" clrDropdownItem>Preferences</a>
            <a clrDropdownItem (click)="authService.logout()"
              ><span class="sally-face-sad-sm"></span>Log out</a
            >
          </clr-dropdown-menu>
        </clr-dropdown>
      </ng-template>
      <ng-template #loggedOut>
        <a routerLink="/login" class="nav-link nav-text"
          ><span class="line-word-logo"></span>Log In</a
        >
      </ng-template>
    </div>
  </clr-header>
  <div class="content-container">
    <div class="content-area no-padding">
      <router-outlet></router-outlet>
    </div>
  </div>
</clr-main-container>

<div *ngIf="spinnerService.isLoading()" class="modal-backdrop">
  <div class="centered-content-area">
    <div class="spinner">Loading...</div>
  </div>
</div>
<!--
<mat-sidenav-container [@inOutAnimation] class="sidenav-container sally-face">
  <mat-sidenav
    #drawer
    class="sidenav sally-peek"
    fixedInViewport
    [attr.role]="'dialog'"
    [mode]="'over'"
    [opened]="false"
  >
    <mat-toolbar><span class="sally-hello"></span></mat-toolbar>

    <mat-nav-list>
      <a mat-list-item routerLink="home" (click)="drawer.toggle()"
        ><span class="sally-face-sm"></span>Home</a
      >
      <a mat-list-item routerLink="about" (click)="drawer.toggle()"
        ><span class="sally-face-question-sm"></span>About</a
      >
      <a mat-list-item routerLink="contact" (click)="drawer.toggle()"
        ><span class="sally-face-eat-sm"></span>Contact</a
      >
      <a
        *ngIf="oauth2User !== undefined"
        mat-list-item
        (click)="drawer.toggle(); authService.logout()"
        ><span class="sally-face-sad-sm"></span>Log out</a
      >
      <a mat-list-item href="https://lin.ee/uwocKqR"
        ><span class="sally-face-love-sm"></span>
        <mat-chip-list aria-label="Line's friend">
          <mat-chip
            *ngIf="oauth2User === undefined || !oauth2User.friend"
            matTooltip="Add {{ environment.appTitle }} as friend"
            [matTooltipPosition]="'below'"
            color="primary"
            selected
            style="background-color: #00c300"
            ><span class="line-logo"></span>Add Friend</mat-chip
          >
          <mat-chip
            *ngIf="oauth2User !== undefined && oauth2User.friend"
            matTooltip="{{ environment.appTitle }} is already your friend"
            [matTooltipPosition]="'below'"
            color="primary"
            selected
            style="background-color: #00c300"
            ><mat-icon style="margin-right: 5px">done</mat-icon
            >Friended</mat-chip
          >
          <mat-chip
            class="arrow"
            matTooltip="Number of {{ environment.appTitle }}'s friend"
            [matTooltipPosition]="'below'"
            color="primary"
            style="
              font-size: 12px;
              margin: 0px 0px 0px 0px;
              padding: 10px;
              min-height: 15px;
            "
            >{{
              numberOfFollower !== undefined ? numberOfFollower.followers : 0
            }}</mat-chip
          >
        </mat-chip-list>
      </a>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <mat-toolbar class="toolbar" color="primary">
      <button
        type="button"
        aria-label="Toggle sidenav"
        mat-icon-button
        (click)="drawer.toggle()"
        class="sally-brush"
        [ngStyle]="
          oauth2User !== undefined
            ? {
                'background-image': 'url(' + oauth2User.pictureUrl + ')',
                'background-size': '100%'
              }
            : {}
        "
      ></button>
      <span class="line-word-logo"></span>
      <span>{{ title }}</span>
      <span class="toolbar-spacer"></span>

      <a
        aria-label="Me on twitter"
        mat-icon-button
        target="_blank"
        rel="noopener"
        href="https://twitter.com/LoHongYun"
        title="My Twitter"
      >
        <svg
          id="twitter-logo"
          xmlns="http://www.w3.org/2000/svg"
          width="40"
          height="40"
          focusable="false"
          viewBox="0 0 400 400"
        >
          <path
            d="M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23"
            fill="#fff"
          ></path>
        </svg>
      </a>
      <a
        arial-label="Me on LinkedIn"
        mat-icon-button
        target="_blank"
        rel="noopener"
        href="https://www.linkedin.com/in/lohgyn/"
      >
        <svg
          id="linkedin-logo"
          xmlns="http://www.w3.org/2000/svg"
          width="34"
          height="34"
          focusable="false"
        >
          <g transform="scale(.7083)" fill="none" fill-rule="evenodd">
            <rect fill="#fff" x="0" y="0" width="46" height="46" rx="4"></rect>
            <path
              d="M0 4.01A4.01 4.01 0 014.01 0h39.98A4.01 4.01 0 0148 4.01v39.98A4.01 4.01 0 0143.99 48H4.01A4.01 4.01 0 010 43.99V4.01zM19 18.3h6.5v3.266C26.437 19.688 28.838 18 32.445 18 39.359 18 41 21.738 41 28.597V41.3h-7V30.159c0-3.906-.937-6.109-3.32-6.109-3.305 0-4.68 2.375-4.68 6.109V41.3h-7v-23zM7 41h7V18H7v23zm8-30.5a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z"
              class="background"
              fill="#3f51b5"
            ></path>
          </g>
        </svg>
      </a>
    </mat-toolbar>
    <router-outlet (activate)="onActivate($event)"></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>
!-->
